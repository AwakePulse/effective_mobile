# Effective Mobile 
**Техническое задание для вакансии Junior Node.js developer**

## Работа с пользователями средствами Node.js.
- В приложении реализованы все поставленные задачи:
  - Регистрация пользователей
  - Авторизация пользователей
  - Получение всех пользователей
  - Получение пользователя по id
  - Блокирование пользователя по id

---

## Требования
* Node.js >= 18.00
* PostgreSQL установлен и запущен
* Настроен .env файл с данными подключения к БД

---

## Пример .env-файла
#### PORT | *порт для запуска приложения*

#### DB_USER | *пользователь postgres*
#### DB_HOST | *сеть использования postgres*
#### DB_NAME | *название базы данных*
#### DB_PASSWORD | *пароль от базы данных*
#### DB_PORT | *порт базы данных*

---

## Установка.
```bash
npm install # Скачать зависимости в node-modules
npx tsc # Скомпилировать проект из TypeScript в JavaScript
npm start # Запустить production версию приложения
```

---

## Routers
### Api, через который идёт доступ 
    - /effective_mobile
### Endpoints
    - get('/users' -> получить всех пользователей);
    - post('/registration' -> зарегистрировать пользователя);
    - post('/login' -> вход от лица пользователя);
    - get('/user/:id' -> получить пользователя по id);
    - put('/user/:id' -> заблокировать пользователя);
---

## Краткое описание каждой из реализованных функций.
1. ### Регистрация пользователей:
   * Пользователь регистрируется с использованием:
     - Полного имени
     - Адреса электронной почты
     - Даты рождения
     - Пароля
   * Пароль хэшируется средствами библиотеки bcryptjs.
   * Каждое из полей проходит валидацию на верность входных данных.
2. ### Авторизация пользователя:
   * Пользователь авторизируется с использованием:
     - Адреса электронной почты
     - Пароля
   * После авторизации пользователь получает токен авторизации, созданный средствами jsonwebtoken.
3. ### Получение всех пользователей:
   * Получив токен авторизации, пользователь, с ролью администратора, имеет доступ к запросу всех пользователей из базы данных.
4. ### Получение пользователя по id:
   * Получив токен авторизации, пользователь может запросить информацию о себе. Запрос остальных пользователей доступен только пользователям с ролью администратора.
5. ### Блокирование пользователя по id:
   * Получив токен авторизации, пользователь, с ролью администратора, имеет доступ к блокировке пользователей по их идентификатору в базе данных.

---

## Использованные библиотеки и средства разработки.
1. ### node.js
2. ### express
3. ### postgres (pg)
4. ### bcryptojs
5. ### jwt
6. ### ts-node-dev
7. ### express-validator

## Иерархия папкок:
```
/src
  | controllers
    |- user.controller
  | routers
    |- user.routers
  | db
    |- db // Файл конфигурации postgres
    |- init // Файл создания таблицы
  | middleware
    |- adminMiddleware
    |- authMiddleware
  | config
    |- config
  | types
    |- express
      |- index.d.ts
```
